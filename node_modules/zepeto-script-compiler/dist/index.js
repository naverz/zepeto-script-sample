(()=>{"use strict";var e={919:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.hasMember=t.hasStaticMember=t.findNode=t.patch=void 0;function patch(e,t,r){let i=e[t];e[t]=function(...e){return r.call(this,i.bind(this),...e)};return e}t.patch=patch;function findNode(e,t){const r=[e];while(r.length){const s=r.pop();if(!s)break;let n=s.getStart(e,true);let a=s.getEnd();if(t>=n&&t<=a){var i=s.getChildren(e);if(i.length==0)return s;r.push(...i)}}return null}t.findNode=findNode;function hasMemberWithBaseTypes(e,t,r){var i=r(e,t);if(i)return i;var s=e;if(s.checker&&e.symbol){e=s.checker.getDeclaredTypeOfSymbol(e.symbol);if(e&&e.isClassOrInterface()){var n=s.checker.getBaseTypes(e);if(n){for(const e of n){if(hasMemberWithBaseTypes(e,t,r))return e}}}}}function hasStaticMember(e,t){return hasMemberWithBaseTypes(e,t,((e,t)=>{if(e.symbol&&e.symbol.exports&&e.symbol.exports.has(t)){return e}}))}t.hasStaticMember=hasStaticMember;function hasMember(e,t){return hasMemberWithBaseTypes(e,t,((e,t)=>{if(e.symbol&&e.symbol.members&&e.symbol.members.has(t)){return e}}))}t.hasMember=hasMember},993:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.OperatorNames=void 0;const i=r(34);const s=r(919);const n=r(375);t.OperatorNames={[i.SyntaxKind.PlusToken]:"op_Addition",[i.SyntaxKind.MinusToken]:"op_Subtraction",[i.SyntaxKind.AsteriskToken]:"op_Multiply",[i.SyntaxKind.SlashToken]:"op_Division",[i.SyntaxKind.PlusEqualsToken]:"op_Addition",[i.SyntaxKind.MinusEqualsToken]:"op_Subtraction",[i.SyntaxKind.AsteriskEqualsToken]:"op_Multiply",[i.SyntaxKind.SlashEqualsToken]:"op_Division",[i.SyntaxKind.EqualsEqualsToken]:"op_Equality",[i.SyntaxKind.ExclamationEqualsToken]:"op_Inequality"};class BinaryExpressionExtension extends n.ExtensionBase{static patch(e,r){let n=e.getTypeChecker();var a=r;var o=a.createBinaryExpressionTrampoline;if(o){try{s.patch(a,"createBinaryExpressionTrampoline",((e,r,s,a,o,l,c)=>e(r,s,a,o,((e,r)=>{var s=t.OperatorNames[e.operatorToken.kind];if(s){if(r.skip==false){var a=r.typeStack[r.stackIndex];var o=r.typeStack[r.stackIndex+1];var c=BinaryExpressionExtension.getExtendedBinaryOperator(n,s,a,o);e.__ExtendedBinaryOperator=c;if(c){return c.returnType}}}else if(e.operatorToken.kind==i.SyntaxKind.EqualsToken&&i.isBinaryExpression(e.right)){var p=e.right;if(p.__ExtendedBinaryOperator){return p.__ExtendedBinaryOperator.returnType}}return l(e,r)}),c)))}catch(e){console.log(e)}}}static execute(e,r){if(i.isBinaryExpression(e)==false)return null;let s=e;let n=s.operatorToken.kind;var a=t.OperatorNames[n];if(!a)return null;let o=e.__ExtendedBinaryOperator;if(!e.__ExtendedBinaryOperator){return null}let l=o.returnType;if(!l||!o||!o.operator||!o.operator.valueDeclaration)return null;r.referencedAliasDeclarations.add(o.ownerType.symbol.name);var c=e.getSourceFile();var p;if(c.locals){var f=c.locals.get(o.ownerType.symbol.escapedName);if(f&&f.declarations&&f.declarations.length){p=f.declarations[0].name}}if(!p){var u=e.getSourceFile();var d=u.imports;let t=o.ownerType.symbol;let s=undefined;let n;let a=[];while(t){a.unshift(t.name.replace(/['|"]/g,""));t=t.parent}n=a.shift();if(a.length>0){n=r.InsertImportDeclarations(n);p=i.factory.createPropertyAccessExpression(i.factory.createIdentifier(n),i.factory.createIdentifier(a.join(".")))}else{return null}}var y;if(i.isMethodDeclaration(o.operator.valueDeclaration)&&i.isIdentifier(o.operator.valueDeclaration.name)){y=o.operator.valueDeclaration.name}else{y=i.factory.createIdentifier(a)}var m=i.visitEachChild(s,r.visitor,r.transformationContext);var h=r.transformationContext.factory;var x=h.createCallExpression(h.createPropertyAccessExpression(p,y),undefined,[m.left,m.right]);if(n==i.SyntaxKind.PlusEqualsToken||n==i.SyntaxKind.MinusEqualsToken||n==i.SyntaxKind.AsteriskEqualsToken||n==i.SyntaxKind.SlashEqualsToken){return h.createBinaryExpression(m.left,h.createToken(i.SyntaxKind.EqualsToken),x)}return x}static isTypeEqual(e,t){if(e==t)return true;if(e.symbol&&t.symbol){if(e.symbol==t.symbol)return true;if(e.symbol.valueDeclaration==t.symbol.valueDeclaration)return true}else if(e.flags==t.flags){if(e.id&&e.id==t.id)return true;if(e.intrinsicName&&e.intrinsicName==t.intrinsicName)return true}return false}static findMatchedBinaryOperator(e,t,r,n,a){t=s.hasStaticMember(t,r);if(t){var o=t.symbol.exports.get(r);if(o==null)return null;var l=o.getDeclarations();if(l){for(const t of l){if(i.isMethodDeclaration(t)){var c=t.parameters;if(c&&c.length==2){var p=c.map((t=>{var r=e.getTypeAtLocation(t.type);return r}));if(BinaryExpressionExtension.isTypeEqual(p[0],n)&&BinaryExpressionExtension.isTypeEqual(p[1],a)){return e.getTypeAtLocation(t.type)}}}}}}return null}static getExtendedBinaryOperator(e,t,r,i){r=e.getBaseTypeOfLiteralType(r);i=e.getBaseTypeOfLiteralType(i);var s=BinaryExpressionExtension.findMatchedBinaryOperator(e,r,t,r,i);if(s)return{ownerType:r,returnType:s,operator:r.symbol.exports.get(t)};s=BinaryExpressionExtension.findMatchedBinaryOperator(e,i,t,r,i);if(s)return{ownerType:i,returnType:s,operator:r.symbol.exports.get(t)}}}t.default=BinaryExpressionExtension},591:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.BuiltInDecorators=void 0;const i=r(34);const s=r(375);t.BuiltInDecorators=new Set(["NonSerialized","HideInInspector","SerializeField"]);class DecoratorExtension extends s.ExtensionBase{static execute(e,r){if(i.isDecorator(e)&&i.isPropertyDeclaration(e.parent)&&i.isCallExpression(e.expression)){var s=e.expression;if(i.isIdentifier(s.expression)&&t.BuiltInDecorators.has(s.expression.escapedText.toString())){return i.factory.createEmptyStatement()}}return null}}t.default=DecoratorExtension},652:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});const i=r(34);const s=r(919);const n=r(375);class ElementAccessExpressionExtension extends n.ExtensionBase{static execute(e,t){if(i.isBinaryExpression(e)){if(e.operatorToken.kind==i.SyntaxKind.EqualsToken&&i.isElementAccessExpression(e.left)){let r=e.left;let n=t.typeChecker.getTypeAtLocation(r.expression);if(t.typeChecker.isArrayType(n))return;let a="set_Item";if(s.hasMember(n,a)){let t=i.factory;return t.createCallExpression(t.createPropertyAccessExpression(r.expression,t.createIdentifier(a)),undefined,[r.argumentExpression,e.right])}}return}if(i.isElementAccessExpression(e)==false)return;let r=e;let n=t.typeChecker.getTypeAtLocation(r.expression);if(t.typeChecker.isArrayType(n))return;let a="get_Item";if(s.hasMember(n,a)){let e=i.factory;return e.createCallExpression(e.createPropertyAccessExpression(r.expression,e.createIdentifier(a)),undefined,[r.argumentExpression])}}}t.default=ElementAccessExpressionExtension},678:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});const i=r(34);const s=r(34);const n=r(919);const a=r(375);class EventHandlerExtension extends a.ExtensionBase{static patch(e,t){let r=e.getTypeChecker();n.patch(e,"getSemanticDiagnostics",((e,t,a)=>{var o=e(t,a);o=o.filter((e=>{if(e.code==2363){var t=n.findNode(e.file,e.start);while(t){if(i.isBinaryExpression(t)){if(t.operatorToken.kind==s.SyntaxKind.MinusEqualsToken&&s.isPropertyAccessExpression(t.left)){let e=r.getTypeAtLocation(t.left.expression);let i=`remove_${t.left.name.escapedText}`;if(n.hasStaticMember(e,i)||n.hasMember(e,i)){return false}}break}t=t.parent}}return true}));return o}))}static execute(e,t){if(s.isBinaryExpression(e)&&(e.operatorToken.kind==s.SyntaxKind.PlusEqualsToken||e.operatorToken.kind==s.SyntaxKind.MinusEqualsToken)&&s.isPropertyAccessExpression(e.left)){let a=t.typeChecker.getTypeAtLocation(e.left.expression);let o=(e.operatorToken.kind==s.SyntaxKind.PlusEqualsToken?"add_":"remove_")+e.left.name.escapedText;if(n.hasStaticMember(a,o)||n.hasMember(a,o)){let n=s.factory;let a=e;var r=s.visitEachChild(a,t.visitor,t.transformationContext);if(s.isPropertyAccessExpression(r.left)){var i=r.right;if(s.isArrowFunction(r.right)==false){i=n.createCallExpression(n.createPropertyAccessExpression(r.right,n.createIdentifier("bind")),undefined,[n.createThis()])}return n.createCallExpression(n.createPropertyAccessExpression(r.left.expression,n.createIdentifier(o)),undefined,[i])}}}}}t.default=EventHandlerExtension},375:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.ExtensionBase=t.ExtensionContext=void 0;const i=r(34);const s=r(919);class ExtensionContext{constructor(e){this.symboleIdentifiers=new WeakMap;this.program=e;this.typeChecker=e.getTypeChecker();this.referencedAliasDeclarations=new Set;this.importDeclarations=new Map}InsertImportDeclarations(e){var t=`__${e}__`;if(this.importDeclarations.has(e)==false){var r=i.factory;var s=r.createImportDeclaration(undefined,undefined,r.createImportClause(false,undefined,r.createNamespaceImport(r.createIdentifier(t))),r.createStringLiteral(e));this.importDeclarations.set(e,s)}return t}updateImportDeclarations(e){if(this.importDeclarations&&this.importDeclarations.size>0){e=i.factory.updateSourceFile(e,[...this.importDeclarations.values(),...e.statements])}return e}visit(e){if(i.isImportSpecifier(e)||i.isNamespaceImport(e)){let t=this.typeChecker.getTypeAtLocation(e.name);if(t.symbol){this.symboleIdentifiers.set(t.symbol,e.name)}}}setTransformationContext(e){this.transformationContext=e;this.resolver=e.getEmitResolver();s.patch(this.resolver,"isReferencedAliasDeclaration",((e,t,r)=>{var s=e(t,r);if(s==false){var n;if(i.isImportClause(t)&&t.namedBindings&&i.isNamedImports(t.namedBindings)){var a=t.namedBindings.elements[0];n=this.typeChecker.getTypeAtLocation(a)}else if(i.isImportClause(t)&&t.namedBindings&&i.isNamespaceImport(t.namedBindings)){return true}else{try{n=this.typeChecker.getTypeAtLocation(t)}catch(e){}if(!n){console.error(i.SyntaxKind[t.kind],"not handled")}}if(n&&n.symbol&&this.referencedAliasDeclarations.has(n.symbol.name)){return true}}return s}))}isReferencedAliasDeclaration(e,t,r){var i=e(t,r);return i}}t.ExtensionContext=ExtensionContext;class ExtensionBase{static patch(e,t){}static execute(e,t){return null}}t.ExtensionBase=ExtensionBase},544:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});const i=r(34);const s=r(375);class ExtensionMethodExtension extends s.ExtensionBase{static execute(e,t){if(i.isCallExpression(e)&&i.isPropertyAccessExpression(e.expression)){var r=t.typeChecker.getSymbolAtLocation(e.expression);if(!r||!r.valueDeclaration)return;var s;var n=i.getJSDocTags(r.valueDeclaration);if(n&&n.length>0){for(let e=0;e<n.length;e++){const t=n[e];if(t.tagName.escapedText=="extension"){s=t.comment;break}}}if(!s)return;var a=i.factory;var o=[e.expression.expression];o=o.concat(e.arguments);return a.createCallExpression(a.createPropertyAccessExpression(a.createCallExpression(a.createIdentifier("$extension"),undefined,[a.createStringLiteral(s)]),e.expression.name),undefined,o)}}}t.default=ExtensionMethodExtension},953:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});const i=r(34);const s=r(375);function IsMethodSignatureOrDeclaration(e){return i.isMethodDeclaration(e)||i.isMethodSignature(e)}class ElementAccessExpressionExtension extends s.ExtensionBase{static execute(e,t){if(i.isNewExpression(e)&&i.isIdentifier(e.expression)&&e.typeArguments&&e.typeArguments.length>0){var r=e.expression.escapedText.toString().split("$");if(r.length!=2)return;var s=parseInt(r[1]);if(e.typeArguments.length!=s)return;var n=i.factory;var a=[e.expression];for(let r=0;r<e.typeArguments.length;r++){const s=e.typeArguments[r];if(i.isTypeReferenceNode(s)&&i.isIdentifier(s.typeName)){var o=t.typeChecker.getTypeAtLocation(s.typeName);if(o.flags==i.TypeFlags.Object){a.push(s.typeName)}else{a.push(n.createCallExpression(n.createIdentifier("$typeof"),undefined,[n.createStringLiteral(s.typeName.escapedText.toString())]))}}}return n.createNewExpression(n.createParenthesizedExpression(n.createCallExpression(n.createIdentifier("$generic"),undefined,a)),undefined,e.arguments)}else if(i.isCallExpression(e)&&i.isPropertyAccessExpression(e.expression)&&e.typeArguments&&e.typeArguments.length>0){var l=t.typeChecker;var c=l.getSymbolAtLocation(e.expression);if(!c)return;var p=l.getResolvedSignature(e);if(!p||IsMethodSignatureOrDeclaration(p.declaration)==false)return;var f=p.declaration;if(IsMethodSignatureOrDeclaration(f)&&f.typeParameters){var u=f.typeParameters;var d=f.parameters||[];for(let r=0;r<c.declarations.length;r++){const s=c.declarations[r];if(s!=f&&IsMethodSignatureOrDeclaration(s)&&!s.typeParameters){if(s&&s.parameters&&s.parameters.length==d.length+1){var y=l.getTypeAtLocation(s.parameters[0].name);var m=y.symbol;if(!m)continue;var h=m.parent;if(y.symbol.name=="Type"&&h&&(h.name=="System"||h.name=='"System"')){var x=true;for(let e=0;e<d.length;e++){var g=l.getTypeAtLocation(d[e]);var v=l.getTypeAtLocation(s.parameters[e+1]);if(g!=v){x=false;break}}if(x){var E=e.arguments.slice(0);var T=e.typeArguments[0];var S;if(i.isTypeQueryNode(T)){S=T.exprName}if(i.isTypeReferenceNode(T)&&i.isIdentifier(T.typeName)){S=T.typeName}if(S&&i.isIdentifier(S)){var b=l.getTypeAtLocation(S);var _=l.getTypeAtLocation(e.expression.expression);if(b.symbol)t.referencedAliasDeclarations.add(b.symbol.name);if(_.symbol)t.referencedAliasDeclarations.add(_.symbol.name);var k=i.factory.createCallExpression(i.factory.createIdentifier("$typeof"),undefined,[S]);E.unshift(k)}return i.factory.createCallExpression(e.expression,undefined,E)}}}}}}return}}}t.default=ElementAccessExpressionExtension},555:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.extensions=void 0;const i=r(953);const s=r(993);const n=r(652);const a=r(678);const o=r(591);const l=r(544);const c=[s.default,n.default,a.default,i.default,o.default,l.default];t.extensions=c},822:(e,t,r)=>{const i=r(555);const s=r(921);s.startServer();function init(e){console.log("init");function create(e){const t=Object.create(null);for(let r of Object.keys(e.languageService)){t[r]=(...t)=>{var i=e.languageService[r].apply(e.languageService,t);return i}}return t}var t=e.typescript.createProgram;e.typescript.createProgram=(...r)=>{var s=t.apply(e.typescript,r);for(const t of i.extensions){t.patch(s,e.typescript)}return s};return{create:create}}e.exports=init},289:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.parseManifest=t.Manifest=void 0;const i=r(622);const s=r(34);const n=r(591);class Manifest{constructor(){this.properties=[]}}t.Manifest=Manifest;function getAttributes(e){var t=[];if(e.decorators){for(let i=0;i<e.decorators.length;i++){const a=e.decorators[i];if(s.isCallExpression(a.expression)&&s.isIdentifier(a.expression.expression)){var r=a.expression.expression;if(n.BuiltInDecorators.has(r.escapedText.toString())){t.push({name:r.escapedText})}}}}return t}function parseManifest(e,t){var r=new Manifest;var n;for(let t=0;t<e.statements.length;t++){const i=e.statements[t];if(s.isClassDeclaration(i)&&i.name){r.name=i.name.escapedText.toString();break}}if(!r.name){r.name=i.basename(e.fileName,".ts")}function getPropertyTypeName(e,r){if(e.intrinsicName){if(r&&s.isTypeReferenceNode(r)&&s.isIdentifier(r.typeName)){if(e.intrinsicName!=r.typeName.escapedText){return{type:r.typeName.escapedText.toString()}}}return{type:e.intrinsicName}}else{if(r&&s.isArrayTypeNode(r)){var i=t.getTypeAtLocation(r.elementType);var n=getPropertyTypeName(i,r.elementType);n.isArray=true;return n}else if(e.symbol){var a=[];var o=e.symbol;while(o){var l=o.escapedName.toString();if(o.flags==s.SymbolFlags.ValueModule){a.unshift(l.substring(1,l.length-1))}else{a.unshift(l)}o=o.parent}return{type:a.join(".")}}}}function getProperties(e){var r=[];if(e.symbol&&e.symbol.escapedName!="ZepetoScriptBehaviour"&&e.symbol.members){e.symbol.members.forEach((e=>{if(e.valueDeclaration&&s.isPropertyDeclaration(e.valueDeclaration)){var i=false;if(e.valueDeclaration.modifiers){for(let t=0;t<e.valueDeclaration.modifiers.length;t++){const r=e.valueDeclaration.modifiers[t];if(r.kind==s.SyntaxKind.PrivateKeyword||r.kind==s.SyntaxKind.ProtectedKeyword){i=true;break}}}var n=t.getTypeAtLocation(e.valueDeclaration);var a=getPropertyTypeName(n,e.valueDeclaration.type);if(a){a.name=e.escapedName.toString();a.attributes=getAttributes(e.valueDeclaration);if(i&&!a.attributes.find((e=>e.name=="SerializeField"))){return}r.push(a)}}}))}var i=t.getBaseTypes(e);if(i){for(const e of i){var n=getProperties(e);r=r.concat(n)}}return r}e.forEachChild((e=>{if(s.isClassDeclaration(e)){var i=t.getTypeAtLocation(e);if(i.symbol&&i.symbol.escapedName==="default"){var n=getProperties(i);for(const e of n){r.properties.push(e)}}}}));return r}t.parseManifest=parseManifest},921:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.startServer=void 0;const i=r(747);const s=r(622);const n=r(622);const a=r(34);const o=r(555);const l=r(788);const c=r(289);const p=r(605);class FileVersion{constructor(){this.version=0}}class CompileResultFile{static from(e,t){var r=new CompileResultFile;r.fileName=e.name;r.source=e.text;r.errors=t||[];return r}}class CompilerServer{constructor(e){this._projectFile=e;a.getFileEmitOutput=this.getFileEmitOutput;this.files=new Map;this.servicesHost={getScriptFileNames:()=>this.ensureScriptFileNames(),getScriptVersion:e=>this.getFile(e).version.toString(),getScriptSnapshot:e=>i.existsSync(e)?a.ScriptSnapshot.fromString(i.readFileSync(e).toString()):undefined,getCurrentDirectory:()=>process.cwd(),getCompilationSettings:()=>this._compilerOptions,getDefaultLibFileName:e=>a.getDefaultLibFilePath(e),fileExists:a.sys.fileExists,readFile:a.sys.readFile,readDirectory:a.sys.readDirectory,directoryExists:a.sys.directoryExists,getDirectories:a.sys.getDirectories};this.services=a.createLanguageService(this.servicesHost,a.createDocumentRegistry());this.server=p.createServer(this.onRequest.bind(this))}ensureScriptFileNames(){return Array.from(this.files.keys()).filter((e=>{if(i.existsSync(e)==false){this.files.delete(e);return false}return true}))}ensureCompilationSettings(){if(this.servicesHost.fileExists(this._projectFile)==false){return{}}else{var e=+i.statSync(this._projectFile).mtime;if(!this._compilerOptions||this._compilerOptionsVersion!=e){this._compilerOptionsVersion=e;var t=readConfig(a,this._projectFile,s.dirname(this._projectFile));this._compilerOptions=t.options;this._compilerOptions.noEmitOnError=true;this.files.clear()}}return this._compilerOptions}getFileEmitOutput(e,t,r,i,s,n){s={before:[l.createTransformer(e)]};for(const t of o.extensions){t.patch(e,a)}var p=new CompileResultFile;p.fileName=t.fileName;p.manifest=c.parseManifest(t,e.getTypeChecker());var f=e.emit(t,writeFile,i,r,s,n);p.errors=f.diagnostics.map((e=>{let t=a.flattenDiagnosticMessageText(e.messageText,"\n");if(e.file){let{line:r,character:i}=e.file.getLineAndCharacterOfPosition(e.start);return`${e.file.fileName} (${r+1},${i+1}): ${t}`}else{return t}}));var u=a;var d=u.FindAllReferences.Core.getReferencesForFileName(p.fileName,e,e.getSourceFiles());d=d.map((e=>{var t=e.node.getSourceFile();return t.fileName}));return{result:p,references:d};function writeFile(e,t,r){p.source=t}}initialize(e){this.files.clear();if(e)e.forEach((e=>this.getFile(e)))}getFile(e){var t=this.files.get(e);if(!t){t=new FileVersion;this.files.set(e,t)}return t}buildFiles(e){e=e.filter(this.servicesHost.fileExists);var t=new Map;for(const s of e){var r=i.statSync(s).mtime;t.set(s,r)}e=e.sort(((e,r)=>t.get(r)-t.get(e)));this.ensureCompilationSettings();for(const r of e){this.getFile(r).version=+t.get(r)||0}let s=new Set;return[].concat(...e.map((e=>this.emitFile(e,s))))}emitFile(e,t){if(!t)t=new Set;else if(t.has(e))return[];var r=Date.now();let i;try{i=this.services.getEmitOutput(e)}catch(t){i={result:{fileName:e,source:null,manifest:null,errors:[t.toString()]},references:[]}}console.log("emit ",Date.now()-r,"ms - ",e);r=Date.now();t.add(e);var s=[i.result];if(i.references){i.references.forEach((e=>{s=s.concat(this.emitFile(e,t))}))}return s}getErrors(e){let t=this.services.getSyntacticDiagnostics(e).concat(this.services.getSemanticDiagnostics(e));return t.map((e=>{let t=a.flattenDiagnosticMessageText(e.messageText,"\n");if(e.file){let{line:r,character:i}=e.file.getLineAndCharacterOfPosition(e.start);return`${e.file.fileName} (${r+1},${i+1}): ${t}`}else{return t}}))}listen(e){this.server.listen(e)}onRequest(e,t){var r=new URL(e.url,"http://localhost");if(r.pathname=="/health"){t.writeHead(200,{"Content-Type":"application/json"});t.write("OK");t.end()}else if(r.pathname=="/files"){t.writeHead(200,{"Content-Type":"application/json"});t.write(JSON.stringify({files:this.ensureScriptFileNames()}));t.end()}else if(e.method=="POST"){var i="";e.on("data",(e=>i+=e));e.on("end",(()=>{try{t.writeHead(200,{"Content-Type":"application/json"});var e=JSON.parse(i);if(e.files){if(r.pathname=="/init"){this.initialize(e.files)}else if(r.pathname=="/build"){var s=this.buildFiles(e.files);if(r.searchParams.get("debug")){t.write(s[0].source)}else{t.write(JSON.stringify({files:s}))}}}t.end()}catch(e){t.writeHead(400);t.write(e.stack?e.stack:e.toString());t.end()}}))}else{t.writeHead(400);t.end()}}}function readConfig(e,t,r){const i=e.readConfigFile(t,e.sys.readFile);if(i.error){throw new Error("tsconfig.json error: "+i.error.messageText)}return e.parseJsonConfigFileContent(i.config,e.sys,r,undefined,t)}function startServer(){let e=undefined;let t=18082;let i;var s=process.argv.slice(2);for(let i=0;i<s.length;i++){if(s[i]=="-v"||s[i]=="--version"){var a=r(306).i8;console.log(a);return}else if(s[i]=="--project"){e=s[++i]}else if(s[i]=="--port"){t=parseInt(s[++i])||t}}if(e){let r=parseInt(process.env["UNITY_PROCESS_ID"]||"0");if(r){var o=setInterval((()=>{let e=false;try{e=process.kill(r,0)}catch(t){e=t.code==="EPERM"}if(!e){console.log("no activity in the process and it terminate");process.exit(0)}}),2e3)}e=n.resolve(e);var l=new CompilerServer(e);l.listen(t)}}t.startServer=startServer},788:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.createTransformer=void 0;const i=r(34);const s=r(555);const n=r(375);function createTransformer(e){return function(t){let r=new n.ExtensionContext(e);r.setTransformationContext(t);const visitor=e=>{r.visit(e);for(let t=0;t<s.extensions.length;t++){const i=s.extensions[t];let n=i.execute(e,r);if(n)return n}return i.visitEachChild(e,visitor,t)};r.visitor=visitor;return e=>{e=i.visitNode(e,visitor);e=r.updateImportDeclarations(e);return e}}}t.createTransformer=createTransformer},306:e=>{e.exports={i8:"0.1.48"}},747:e=>{e.exports=require("fs")},605:e=>{e.exports=require("http")},622:e=>{e.exports=require("path")},34:e=>{e.exports=require("typescript")}};var t={};function __nccwpck_require__(r){var i=t[r];if(i!==undefined){return i.exports}var s=t[r]={exports:{}};var n=true;try{e[r](s,s.exports,__nccwpck_require__);n=false}finally{if(n)delete t[r]}return s.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var r=__nccwpck_require__(822);module.exports=r})();